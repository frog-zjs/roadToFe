因为有朋友要过生日，就萌生了要为朋友做一个h5展示页面的想法。作为一名入门不久的小前端，直接用网上现成的生成器显得诚意不够，最后选择使用swiper.js这一功能和文档较为完善的插件来做展示页面。配合SAE作为云服务器来完成页面的发布，在阿里云旗下的万网完成域名注册和解析。
<!-- more -->
# 我的收获
1.熟悉了swiper.js插件的使用
2.对css3动画和background-size有了更深的认识
3.将静态页面发布至SAE
4.注册域名并绑定
5.图片压缩

# 页面遇到的问题

## loading图
最初是没有loading图的，后来在实际测试时发现载入时间过长，导致体验很差。
解决思路：加入一个遮罩层盖住底下的元素，在遮罩层上写一个css3动画，提示页面正在加载中，js中调用`window.onload`函数，即页面全部加载完成后隐藏遮罩层和动画。

### loading后首屏动画无法显示（未解决）
经过测试，动画本身是会执行的。只是因为loading画面遮盖住了，用户看不到。但是由于加载时间是不确定的，所以无法通过设置动画延时来解决，猜想可以同样通过调用`window.onload`来解决。
swiper插件调用动画是需要添加一个类名`ani`的，我的想法是调用onload函数后动态添加类名，但是实际测试中发现首屏动画依然无法显示。改变思路后，通过高程P265页对`setAttribute`方法的讲解，又通过设置标签的自定义属性，依然无法实现。
最后为标签的effect属性添加了`infinite`，实现无限重复执行动画来代替。

## 自适应
移动端的自适应是一个很大的问题，页面目前还是比较简单，所以简单的媒体查询就可以实现。
接下来准备研究一下手机淘宝的h5页面解决自适应的方案。
[使用Flexible实现手淘H5页面的终端适配](http://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html)

## onSlideChangeEnd
这是swiper插件的一个回调事件，在页面翻页后触发，我用来实现动画的执行。第一屏加载完成后会默认触发，滑动过快时该事件不会触发。

# background-size
因为要用到背景图片，想要通过background来设置，遇到的问题是图片如何覆盖整个屏幕。通过查询W3School上background的属性，尝试使用background-size中的contain和cover属性，效果都不如人意。
`background-size: contain;`
该属性使图片完全铺满整个容器，即自左上角起覆盖容器的背景并且等比例拉伸至和容器高度相等，宽度如果超出屏幕时会进行裁切，出现显示不完全的现象。
`background-size: cover;`
该属性使图片完全展示，即图片尺寸不足时容器会留白，不会充满整个容器。

# SAE
SAE目前支持使用git和svn方式进行代码托管，页面的整合发布流程大大简化。
如果是纯静态页面，首页名称改为index.html即可以在加载应用时默认进入。

# 域名

## 注册域名
第一次注册域名，选择使用阿里云旗下的万网来购买域名。这样可以实现域名的高度定制化，避免发送给朋友的链接带着一长串SAE的冗杂部分。注册域名很简单，只需要在万网查找是否已经被注册然后选择未被注册的购买即可。
注意：如果是企业用域名，外国的一些域名（如：.space）是无法进行备案的。
[万网-阿里云旗下品牌](http://wanwang.aliyun.com/)

## 绑定域名
SAE和阿里云后台配合绑定域名过程也很简单，需要注意的是，如果域名未备案会绑定海外数据中心，海外数据中心会产生双倍云豆费用。并且国内访问速度也较慢。
[新浪SAE应用域名绑定以及解析详细教程](http://saebbs.com/forum.php?mod=viewthread&tid=31040)

## 万网cname不支持顶级域名
访问时需要在前面加www。绑定成功后，一开始用顶级域名怎么访问也不行，搜索各种解决办法无果，后来发现是万网的一项条款，这个故事告诉我们，随手点同意的服务条款可能会有重要的内容。

# 图片压缩
推荐两个网站：
1.[tinypng.com](https://tinypng.com/)
无需注册即可实现在线批量压缩图片，缺点是无法批量下载并且国内访问速度有时很慢。
2.[图好快](www.tuhaokuai.com)
功能较多，国内访问快。缺点是高级功能需要登录。

最后附上做好的demo地址：[www.deartango.space](www.deartango.space)